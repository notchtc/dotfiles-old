#!/usr/bin/sh
echo "Installing rcm"
sudo xbps-install -y rcm >> /dev/null
printf "\n"

echo "Installing git"
sudo xbps-install -y git >> /dev/null
printf "\n"

echo "Downloading dotfilkes"
git clone "https://gitlab.com/cha0t1c/dotfiles.git" "$HOME/.dotfiles" >> /dev/null
echo "Symlinking dotfiles"
rcup
rm -r "$HOME/.images" "$HOME/.LICENSE" "$HOME/.README.md"
printf "\n"

echo "Installing xorg"
sudo xbps-install -y xorg
printf "\n"

awesome="awesome alacritty picom maim xclip pamixer playerctl sxiv"
printf "Do you want to install awesome? [Y/N] "
read -r answer

if [ "$answer" != "${answer#[Yy]}" ]; then
    for i in $awesome; do
        echo "Installing $i"
        sudo xbps-install -y "$i" >> /dev/null
    done
fi
printf "\n"

bspwm="bspwm sxhkd alacritty dunst maim nitrogen pamixer picom playerctl polybar rofi xbacklight xclip"
printf "Do you want to install bspwm? [Y/N] "
read -r answer

if [ "$answer" != "${answer#[Yy]}" ]; then
    for i in $bspwm; do
        echo "Installing $i"
        sudo xbps-install -y "$i" >> /dev/null
    done
fi
printf "\n"

echo "Installing curl"
sudo xbps-install -y curl >> /dev/null

echo "Installing 7z"
sudo xbps-install -y p7zip >> /dev/null

echo "Installing Hack font"
sudo xbps-install -y font-hack-ttf >> /dev/null
echo "Installing Hack Nerd Font"
curl -LO "https://github.com/ryanoasis/nerd-fonts/releases/download/v2.1.0/Hack.zip"
7z x Hack.zip >> /dev/null
rm Hack.zip
mkdir "$HOME"/.local/share/fonts >> /dev/null
mv Hack* "$HOME"/.local/share/fonts
fc-cache -f
printf "\n"

other="firefox gimp mpv sxiv neovim keepassxc OTPClient lxappearance"
for i in $other; do
	printf "Do you want to install %s? [Y/N] " "$i"
	read -r answer
	if [ "$answer" != "${answer#[Yy]}" ]; then
		sudo xbps-install -y "$i" >> /dev/null
	fi
done

fish="fish-shell bat lsd"
printf "Do you want to install fish? [Y/N] "
read -r answer

if [ "$answer" != "${answer#Yy}" ]; then
    for i in $fish; do
	printf "Installing %s?" "$i"
	sudo xbps-install -y "$i" >> /dev/null
    done
fi

echo "Updating packages"
sudo xbps-install -Su
